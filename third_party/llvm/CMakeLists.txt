get_filename_component(LLVM_BIN "${CMAKE_CXX_COMPILER}" DIRECTORY)
set(LLVM_TABLEGEN "${LLVM_BIN}/llvm-tblgen")
set(CLANG_TABLEGEN "${LLVM_BIN}/clang-tblgen")
set(CLANG_TABLEGEN_EXE "${CLANG_TABLEGEN}")
set(SCHREIBER_TABLEGEN "${CMAKE_CURRENT_BINARY_DIR}/TableGen/schreiber-tblgen")
find_package(LLVMTableGen REQUIRED)
find_package(ClangTableGen REQUIRED)
cmake_policy(SET CMP0116 OLD)

add_subdirectory(TableGen)
add_subdirectory(diagnostics)
add_subdirectory(lexer)

get_property(CLANG_TABLEGEN_TARGETS GLOBAL PROPERTY CLANG_TABLEGEN_TARGETS)
add_custom_target(schreiber-tablegen-targets DEPENDS "${CLANG_TABLEGEN_TARGETS}")
set_target_properties(schreiber-tablegen-targets PROPERTIES FOLDER "Misc")
